import{d as x,b as k,e as R,k as B,r as a,h as D,l as E,c as r,o as c,a as v,w as z,v as I,m as p,u as S,_ as C}from"./index-BlBR9Wvl.js";const L={class:"container"},N={class:"content"},U={key:1,class:"text-center p-4"},V=x({__name:"MemoDetail",setup($){const _=B(),i=S(),{getById:f,update:h}=k(),t=R(),w=window.Number.parseInt(_.params.id),l=a(null),n=a(!0),o=a(null),y=async()=>{try{n.value=!0;const e=await f(w);e?(l.value=e,t.setData(e.id,e.title,e.content)):i.push("/")}catch(e){console.error("Error loading memo:",e),i.push("/")}finally{n.value=!1}},g=async()=>{if(l.value)try{await h(t.id,t.title,t.content)}catch(e){console.error("Error saving memo:",e)}},b=()=>t.$subscribe(()=>{g()});let u=null;const d=()=>{if(o.value){const e=o.value.getBoundingClientRect(),s=window.innerHeight-e.top-15;o.value.style.height=`${s}px`}},m=()=>{d()};return D(async()=>{await y(),u=b(),d(),window.addEventListener("resize",m)}),E(()=>{window.removeEventListener("resize",m),u?.()}),(e,s)=>(c(),r("div",{class:"memo-detail",ref_key:"rootRef",ref:o},[v("div",L,[v("div",N,[n.value?(c(),r("div",U," 로딩 중... ")):z((c(),r("textarea",{key:0,"onUpdate:modelValue":s[0]||(s[0]=M=>p(t).content=M),class:"form-control",placeholder:"메모 내용을 입력하세요",rows:"20"},null,512)),[[I,p(t).content,void 0,{trim:!0}]])])])],512))}}),T=C(V,[["__scopeId","data-v-25d2789c"]]);export{T as default};
